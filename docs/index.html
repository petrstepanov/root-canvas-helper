<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CanvasHelper: Helper Class for CERN ROOT Canvas</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CanvasHelper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Helper Class for CERN ROOT Canvas </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a></p>
<p>üè†Ô∏è Project homepage: <a href="https://petrstepanov.com/root-canvas-helper">https://petrstepanov.com/root-canvas-helper</a></p>
<p>üê± Github repository: <a href="https://github.com/petrstepanov/root-canvas-helper">https://github.com/petrstepanov/root-canvas-helper</a></p>
<p>By default, ROOT graphics on the canvas scales according to the canvas size. The bigger the canvas size is - the larger corresponding fonts, paddings are. This approach works good for canvases that contain one or two sub-pads. However, when ROOT canvas is divided into a higher number of sub-pads, say, 3x3, 5x5 or more, following issues take place:</p>
<ul>
<li>Absolute pixel font size on every child pad becomes too small and almost unreadable.</li>
<li>Font sizes are inconsistent across various canvas elements (no typographic scale).</li>
<li>Text in the legend and statistic boxed becomes very small.</li>
<li>By default, ROOT canvas fas a fixed left margin value. Therefore, the Y axis title sometimes gets pushed outside the canvas area.</li>
</ul>
<p>Above issues are especially notable on screens with smaller resolution. For instance, let us create a test ROOT canvas divided into 4 sub-pads. On the screenshot below, canvas size is set to 800x600 pixels.</p>
<p align="center"></p>
<p><img src="https://raw.githubusercontent.com/petrstepanov/root-canvas-helper/main/resources/canvas-default.png" alt="Standard ROOT canvas with multiple sub pads" width="85%" class="inline"/> </p>
<p>It is quite clear that sharing the plots with such a small text is rather unacceptable. Often when sharing screen at the online conferences, participants can hardly see the results.</p>
<p>Indeed, ROOT allows for setting a fixed pixel size font. However, this is usually not enough. A nice looking multi-pad plot also requires tweaking of the number of the tick marks, adjusting frame margins, tick mark length, changing title font sizes, axis title spacing and many more. ROOT is a very flexible framework and majority of these things can be easily tweaked. But at what cost? It comes down to duplicating chunks of code for every particular canvas. Moreover,</p>
<p>This library is aimed on fixing issues outlined above. Canvas Helper converts ROOT plots from fractional-based geometry to fixed pixel sizes. As a result, the plot looks more alike to what Gnuplot output is.:</p>
<p align="center"></p>
<p><img src="https://raw.githubusercontent.com/petrstepanov/root-canvas-helper/main/resources/canvas-processed.png" alt="ROOT canvas processed with CanvasHelper" width="85%" class="inline"/> </p>
<p>A single line of code is required to make the change happen. We simply pass the canvas instance to the library after all the primitives were created: </p><div class="fragment"><div class="line">CanvasHelper::getInstance()-&gt;addCanvas(yourCanvas);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md0"></a>
List of Fetures</h1>
<ul>
<li>Adding a joint title for canvas that was divided into multiple pads. This was frequently asked on the ROOT forum.</li>
<li>Library also allows adding a subtitle to the ROOT canvas. This may be useful for plots that need some extra information.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/petrstepanov/root-canvas-helper/main/resources/multi-pad-canvas-title.png" alt="Add title for ROOT canvas with multiple pads" width="85%" class="inline"/> </p>
<ul>
<li>Impemented rounding of the parameter values and errors inside the statistics box. Parameter values round to the first significant digit of their errors. This improves visual clarity of the data.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/petrstepanov/root-canvas-helper/main/resources/cern-root-parameter-values-rounding.png" alt="Rounding of the parameter values for ROOT statistics box" width="85%" class="inline"/> </p>
<ul>
<li>Stat boxes and legends can be force aligned to canvas edges. Single edge or a combination of two (e.g. top &amp; left, bottom &amp; right) are supported.</li>
<li>Another cool feature is that registered canvases and sub-pads automatically re-adjust all the dimensions and their primitives upon the resize event.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/petrstepanov/root-canvas-helper/main/resources/canvas-resize.png" alt="Resizing a ROOT canvas" width="85%" class="inline"/> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation with CMake ‚Ä¢ Preferred</h1>
<p>This is the preferred installation option. Installation depends on prerequisites:</p><ul>
<li>Have <code>cmake</code> version 3.XX program installed on computer. Usually CMake is included in Linux "Development Tools" group package. On older distributions CMake v3.XX may be named <code>cmake3</code>.</li>
<li>ROOT environment should be sourced in the current shell. Tested with ROOT v6.26.XX.</li>
</ul>
<p>First we download the repository and create an out-of-source build folder.</p>
<div class="fragment"><div class="line">mkdir -p ~/Downloads &amp;&amp; cd ~/Downloads</div>
<div class="line">git clone https://github.com/petrstepanov/root-canvas-helper</div>
<div class="line">mkdir -p ./root-canvas-helper-build &amp;&amp; cd ./root-canvas-helper-build</div>
</div><!-- fragment --><p>Next we invoke CMake. It ensures that all the dependencies are satisfied and generates GNU <code>Makefile</code>. Finally, we execute Makefile's <code>install</code> target:</p>
<div class="fragment"><div class="line">cmake ../root-canvas-helper</div>
<div class="line">cmake --build . --target install</div>
</div><!-- fragment --><p>Makefile generates dictionary, builds shared libaray, compiles code into object files, links the executable, and installs corresponding files files in required locations.</p>
<p><b>Tip</b>. If above command requires administrator privilleges that current user does not have, the install prefix can be changed to a local install:</p>
<div class="fragment"><div class="line">cmake -DCMAKE_INSTALL_PREFIX=$HOME/.local ../root-canvas-helper</div>
<div class="line">cmake --build . --target install</div>
</div><!-- fragment --><p>Additionally, <code>$PATH</code>, <code>$LD_LIBRARY_PATH</code>, and <code>$CPLUS_INCLUDE_PATH</code> environemnt variables need to be modified for the library to be discoverable. Below please find an example how to do it in BASH and CSH shells:</p>
<h2><a class="anchor" id="autotoc_md2"></a>
BASH Shell</h2>
<div class="fragment"><div class="line">echo &quot;export PATH=$HOME/.local/bin:$PATH&quot; &gt;&gt; $HOME/.bashrc</div>
<div class="line">echo &quot;export LD_LIBRARY_PATH=$HOME/.local/lib:$LD_LIBRARY_PATH&quot; &gt;&gt; $HOME/.bashrc</div>
<div class="line">echo &quot;export CPLUS_INCLUDE_PATH=$HOME/.local/include:$CPLUS_INCLUDE_PATH&quot; &gt;&gt; $HOME/.bashrc</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3"></a>
CSH-Based Shells</h2>
<div class="fragment"><div class="line">echo &quot;setenv PATH $HOME/.local/bin:$PATH&quot; &gt;&gt; $HOME/.cshrc</div>
<div class="line">echo &quot;setenv LD_LIBRARY_PATH $HOME/.local/lib:$LD_LIBRARY_PATH&quot; &gt;&gt; $HOME/.cshrc</div>
<div class="line">echo &quot;setenv CPLUS_INCLUDE_PATH $HOME/.local/include:$CPLUS_INCLUDE_PATH&quot; &gt;&gt; $HOME/.cshrc</div>
</div><!-- fragment --><p>This should do the trick.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Manual Installation ‚Ä¢ Optional</h1>
<p>This is an alternative way of building the the library with Cling interpreter. Check out the repository:</p>
<div class="fragment"><div class="line">mkdir -p ~/Downloads &amp;&amp; cd ~/Downloads</div>
<div class="line">git clone https://github.com/petrstepanov/root-canvas-helper</div>
<div class="line">cd ./root-canvas-helper/src</div>
</div><!-- fragment --><p>Make sure your ROOT environment is set up. Next, enter the Cling interpreter shell and compile a shared library from sources:</p>
<div class="fragment"><div class="line">root</div>
<div class="line">.L CanvasHelper.cpp+</div>
<div class="line">.q</div>
</div><!-- fragment --><p>Now that the shared library is compiled we install the <code>.so</code> library, <code>.pcm</code> dictionary and <code>*.h</code> header files. Commands below may require administrative persissions:</p>
<div class="fragment"><div class="line">cp CanvasHelper*.so CanvasHelper*.pcm CanvasHelper*.d `root-config --libdir`</div>
<div class="line">cp CanvasHelper*.h `root-config --incdir`</div>
<div class="line">cp canvasHelperDemo.cpp $ROOTSYS/macros</div>
</div><!-- fragment --><p>Now that the library is installed, user should be able to run the demo macros:</p>
<div class="fragment"><div class="line">root canvasHelperDemo.cpp</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
How to Use the Library</h1>
<h2><a class="anchor" id="autotoc_md6"></a>
In a ROOT Macro</h2>
<p>After the library was installed, it needs to be loaded into the interpreter session in your ROOT script:</p>
<div class="fragment"><div class="line">#ifdef __CINT__</div>
<div class="line">  gSystem-&gt;Load(&quot;CanvasHelper&quot;);</div>
<div class="line">#endif</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
In a ROOT-based Program</h2>
<p>If developing a ROOT-based project (not a ROOT macro script), corresponding library header file needs to be included <code>#include &lt;<a class="el" href="CanvasHelper_8h_source.html">CanvasHelper.h</a>&gt;</code>. Program needs to be link against the <a class="el" href="classCanvasHelper.html">CanvasHelper</a> shared library. Library should be discoverable witn CMake's <code>find_library(...)</code>. function.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Documentation and Code Samples</h1>
<p>Please refer to the Doxygen documentation to get familiar with all functionality: <a href="https://petrstepanov.com/root-canvas-helper/classCanvasHelper.html">https://petrstepanov.com/root-canvas-helper/classCanvasHelper.html</a></p>
<p>Find a demo ROOT macros utilizing the CanvasHepler library here: <a href="https://github.com/petrstepanov/root-canvas-helper/blob/main/src/canvasHelperDemo.cpp">https://github.com/petrstepanov/root-canvas-helper/blob/main/src/canvasHelperDemo.cpp</a></p>
<h1><a class="anchor" id="autotoc_md9"></a>
How to Contribute</h1>
<p>Feel free to contribute or suggest any useful features. Library can be compiled with debug symbols and/or imported to the IDE of your choice. Following CMake variable should be specified to successfully build the library in the IDE:</p>
<div class="fragment"><div class="line">CMAKE_BUILD_TYPE:=Debug</div>
<div class="line">ROOT_DIR=&lt;path-to-root-compiled-with-debug-symbols&gt;/cmake</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
How Add to CMake Project</h1>
<p>Please refer to this GitHub repository to find an example of integration of this library into a CMake-Based project:</p>
<p><a href="https://github.com/petrstepanov/light-guides/tree/main/draw">https://github.com/petrstepanov/light-guides/tree/main/draw</a></p>
<p>Thank you for your attention! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
